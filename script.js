// ========== CONFIGURA√á√ÉO DE TRADU√á√ÉO (i18next) ==========
const resources = {
    "pt-BR": {
        translation: {
            "nav_inicio": "In√≠cio",
            "nav_proposta": "Nossa Proposta",
            "nav_servicos": "Servi√ßos",
            "nav_sobre": "Sobre",
            "nav_blog": "Blog",
            "nav_precos": "Pre√ßos",
            "nav_contato": "Contato",
            "hero_subtitulo": "Transforme dados em decis√µes estrat√©gicas para o seu neg√≥cio",
            "hero_btn": "Entre em Contato",
            "prop_titulo": "Nossa Proposta",
            "proposta_texto": "Seus dados t√™m <span class='destaque-primario'>hist√≥rias para contar</span> e n√≥s sabemos como traduzi-las em <span class='destaque-secundario'>a√ß√µes que impulsionam resultados</span>. Trabalhamos <span class='destaque-primario'>lado a lado</span> com voc√™, do diagn√≥stico at√© a implementa√ß√£o.",
            "proposta_estatistica_etapas": "Etapas",
            "proposta_estatistica_objetivo": "Objetivo",
            "proposta_estatistica_resultados": "Resultados",
            "proposta_consulta_inicial_titulo": "Consulta Inicial",
            "proposta_consulta_inicial": "Reuni√£o para compreender suas necessidades, objetivos de neg√≥cio e desafios atuais. A <strong>Apolo</strong> analisa seu contexto e identifica oportunidades de melhoria atrav√©s dos dados.",
            "proposta_diagnostico_titulo": "Diagn√≥stico",
            "proposta_diagnostico": "Avalia√ß√£o detalhada da maturidade dos seus dados, sistemas existentes e processos. Identificamos gaps e definimos prioridades estrat√©gicas para maximizar o retorno do investimento.",
            "proposta_proposta_titulo": "Proposta",
            "proposta_proposta": "Um dia √∫til ap√≥s o recebimento da consulta, a <strong>Apolo</strong> envia uma proposta com a descri√ß√£o dos servi√ßos, prazos de entrega, or√ßamento e forma de pagamento.",
            "proposta_execucao_titulo": "Execu√ß√£o",
            "proposta_execucao": "De posse de todos arquivos necess√°rios e de acordo com a demanda, a <strong>Apolo</strong> executa o projeto com acompanhamento cont√≠nuo e comunica√ß√£o transparente sobre o progresso.",
            "proposta_entrega_titulo": "Entrega",
            "proposta_entrega": "Entregamos um relat√≥rio contendo uma documenta√ß√£o e descri√ß√£o completa de todos os passos percorridos durante a execu√ß√£o do projeto, garantindo total transpar√™ncia e conhecimento transferido.",
            "nossos_servicos_titulo": "Nossos Servi√ßos",
            "servico_analise_exploratoria_titulo": "An√°lise Explorat√≥ria",
            "servico_analise_exploratoria":"Descubra padr√µes e insights ocultos nos seus dados atrav√©s de an√°lises estat√≠sticas avan√ßadas e visualiza√ß√µes intuitivas.",
            "servico_benchmark_titulo": "Benchmark",
            "servico_benchmark":"Mapeamos o cen√°rio competitivo e identificamos as melhores pr√°ticas do setor. Garanta que sua empresa atue com vis√£o completa e intelig√™ncia de mercado.",
            "servico_modelagem_preditiva_titulo": "Modelagem Preditiva",
            "servico_modelagem_preditiva":"Utilize machine learning para prever tend√™ncias, comportamentos e resultados futuros do seu neg√≥cio.",
            "servico_etl_integracao":"Automatize processos de coleta, transforma√ß√£o e carregamento de dados de m√∫ltiplas fontes.",
            "servico_apoio_estrategico":"Orienta√ß√£o especializada para implementar uma cultura data-driven na sua organiza√ß√£o.",
            "servico_otimizacao_processos":"Identifique gargalos e oportunidades de melhoria atrav√©s da an√°lise detalhada de processos.",
            "servico_otimizacao_processos":"Identifique gargalos e oportunidades de melhoria atrav√©s da an√°lise detalhada de processos.",

// üëá ADICIONE ESTAS LINHAS AQUI
"sobre_tag": "Nossa miss√£o",
"sobre_titulo": "A Apolo Analytics",
"sobre_paragrafo_1": "Vivemos em um mundo onde decis√µes estrat√©gicas precisam ser r√°pidas e precisas, e √© aqui que os dados se tornam um recurso inestim√°vel. Mas, para n√≥s, os dados n√£o s√£o apenas n√∫meros em uma planilha. Eles s√£o hist√≥rias esperando para ser contadas, s√£o insights que podem guiar decis√µes, s√£o a base para o crescimento sustent√°vel de qualquer empresa.",
"sobre_paragrafo_2": "Na Apolo Analytics, acreditamos que enxergar √© muito mais do que apenas ver. √â compreender profundamente, √© descobrir o que antes estava oculto, √© revelar o verdadeiro potencial de um neg√≥cio. Nossa miss√£o √© simples e poderosa: transformar a forma de enxergar as empresas atrav√©s dos dados.",
"sobre_paragrafo_3": "Nosso compromisso vai al√©m de fornecer tecnologia ou consultoria. Estamos comprometidos em transformar a maneira como voc√™ v√™ seu neg√≥cio. Queremos que voc√™ descubra novas oportunidades, tome decis√µes mais informadas e, acima de tudo, enxergue o caminho para o crescimento com mais clareza.",

"BI":"Explore o BI (Business Intelligence) elaborado com dados reais de uma planilha de CRM.",
            "BI":"Explore o BI (Business Intelligence) elaborado com dados reais de uma planilha de CRM.",
            "dashboard_dica":"üí° Dica: Use os filtros interativos para explorar diferentes perspectivas dos dados"
        }
    },
    "en": {
        translation: {
            "nav_inicio": "Home",
            "nav_proposta": "Our Proposal",
            "nav_servicos": "Services",
            "nav_sobre": "About",
            "nav_blog": "Blog",
            "nav_precos": "Pricing",
            "nav_contato": "Contact",
            "hero_subtitulo": "Transform data into strategic decisions for your business",
            "hero_btn": "Get in Touch",
            "prop_titulo": "Our Proposal",
            "proposta_texto": "Your data has <span class='destaque-primario'>stories to tell</span> and we know how to translate them into <span class='destaque-secundario'>actions that drive results</span>. We work <span class='destaque-primario'>side by side</span> with you, from diagnosis to implementation.",
            "proposta_estatistica_etapas": "Steps",
            "proposta_estatistica_objetivo": "Goal",
            "proposta_estatistica_resultados": "Results",
            "proposta_consulta_inicial_titulo": "Initial Consultation",
            "proposta_consulta_inicial": "Meeting to understand your needs, business objectives, and current challenges. <strong>Apolo</strong> analyzes your context and identifies improvement opportunities through data.",
            "proposta_diagnostico_titulo": "Diagnosis",
            "proposta_diagnostico": "Detailed assessment of your data maturity, existing systems, and processes. We identify gaps and define strategic priorities to maximize return on investment.",
            "proposta_proposta_titulo": "Proposal",
            "proposta_proposta": "One business day after the consultation, <strong>Apolo</strong> sends a proposal with service descriptions, delivery deadlines, budget, and payment methods.",
            "proposta_execucao_titulo": "Execution",
            "proposta_execucao": "With all necessary files in hand and according to demand, <strong>Apolo</strong> executes the project with continuous monitoring and transparent communication on progress.",
            "proposta_entrega_titulo": "Delivery",
            "proposta_entrega": "We deliver a report containing complete documentation and description of all steps taken during project execution, ensuring total transparency and knowledge transfer.",
            "nossos_servicos_titulo": "Our Services",
            "servico_analise_exploratoria_titulo": "Exploratory Analysis",
            "servico_analise_exploratoria": "Discover hidden patterns and insights in your data through advanced statistical analysis and intuitive visualizations.",
            "servico_benchmark_titulo": "Benchmark",
            "servico_benchmark": "We map the competitive landscape and identify industry best practices. Ensure your company operates with a complete vision and market intelligence.",
            "servico_modelagem_preditiva_titulo": "Predictive Modeling",
            "servico_modelagem_preditiva": "Use machine learning to predict trends, behaviors, and future results for your business.",
            "servico_etl_integracao": "Automate data collection, transformation, and loading processes from multiple sources.",
            "servico_apoio_estrategico": "Specialized guidance to implement a data-driven culture in your organization.",
            "servico_otimizacao_processos": "Identify bottlenecks and improvement opportunities through detailed process analysis.",
            // ... c√≥digo anterior ...
"servico_otimizacao_processos": "Identify bottlenecks and improvement opportunities through detailed process analysis.",

// üëá ADICIONE ESTAS LINHAS AQUI
"sobre_tag": "Our mission",
"sobre_titulo": "About Apolo Analytics",
"sobre_paragrafo_1": "We live in a world where strategic decisions need to be fast and accurate, and this is where data becomes an invaluable resource. But for us, data is not just numbers on a spreadsheet. They are stories waiting to be told, insights that can guide decisions, the foundation for sustainable growth of any company.",
"sobre_paragrafo_2": "At Apolo Analytics, we believe that seeing is much more than just looking. It's understanding deeply, discovering what was previously hidden, revealing the true potential of a business. Our mission is simple yet powerful: to transform the way companies are seen through data.",
"sobre_paragrafo_3": "Our commitment goes beyond providing technology or consulting. We are committed to transforming the way you see your business. We want you to discover new opportunities, make more informed decisions, and above all, see the path to growth with greater clarity.",

"BI": "Explore the BI (Business Intelligence) developed with real data from a CRM spreadsheet.",
// ... resto do c√≥digo ...
            "BI": "Explore the BI (Business Intelligence) developed with real data from a CRM spreadsheet.",
            "dashboard_dica": "üí° Tip: Use interactive filters to explore different data perspectives"
        }
    }
};

// Fun√ß√£o para aplicar a tradu√ß√£o
function atualizarTextos() {
    // 1. Localiza elementos simples (sem tags)
    const localize = locI18next.init(i18next);
    localize('[data-i18n]');

    // 2. O "CURINGA" PARA QUALQUER TAG (span, strong, em, etc.)
    document.querySelectorAll('[data-i18n]').forEach(elemento => {
        const chave = elemento.getAttribute('data-i18n');
        const traducao = i18next.t(chave);
        
        // Verifica se a tradu√ß√£o cont√©m qualquer tag HTML
        if (traducao.includes('<') && traducao.includes('>')) {
            elemento.innerHTML = traducao;
        }
    });
}

// Inicializa o i18next
i18next.init({
    lng: localStorage.getItem('userLang') || 'pt-BR',
    resources
}, (err, t) => {
    atualizarTextos();
    const switcher = document.getElementById('language-switcher');
    if(switcher) switcher.value = i18next.language;
});

// Evento do Seletor de Idioma
document.addEventListener('change', (e) => {
    if (e.target.id === 'language-switcher') {
        const novoIdioma = e.target.value;
        i18next.changeLanguage(novoIdioma, () => {
            atualizarTextos();
            localStorage.setItem('userLang', novoIdioma);
            document.documentElement.lang = novoIdioma;
        });
    }
});

// ========== MENU HAMB√öRGUER ==========
const hamburger = document.getElementById('hamburger');
const navLinks = document.getElementById('navLinks');
const menuLinks = document.querySelectorAll('.nav-links a');

if (hamburger && navLinks) {
    hamburger.addEventListener('click', (e) => {
        e.stopPropagation();
        hamburger.classList.toggle('active');
        navLinks.classList.toggle('active');
    });

    menuLinks.forEach((link) => {
        link.addEventListener('click', () => {
            hamburger.classList.remove('active');
            navLinks.classList.remove('active');
        });
    });

    document.addEventListener('click', (e) => {
        if (!hamburger.contains(e.target) && !navLinks.contains(e.target)) {
            hamburger.classList.remove('active');
            navLinks.classList.remove('active');
        }
    });
}

// ========== SCROLL SUAVE PARA LINKS √ÇNCORA ==========
const navLinksAnchor = document.querySelectorAll('a[href^="#"]');

navLinksAnchor.forEach((anchor) => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        const target = document.querySelector(targetId);

        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start',
            });
        }
    });
});

// ========== FORMUL√ÅRIO GOOGLE ==========
document.addEventListener('DOMContentLoaded', () => {
    const formularios = document.querySelectorAll('.google-form');

    if (formularios.length === 0) return;

    formularios.forEach((formulario) => {
        formulario.addEventListener('submit', (e) => {
            e.preventDefault();

            const btnEnviar = formulario.querySelector('button[type="submit"]');
            const msgSucesso = formulario.querySelector('.mensagem-sucesso');

            if (btnEnviar) {
                // Aqui usamos o i18next para o feedback do bot√£o tamb√©m!
                btnEnviar.innerText = i18next.language === 'en' ? 'Sending...' : 'Enviando...';
                btnEnviar.disabled = true;
            }

            const dados = new FormData(formulario);

            fetch(formulario.action, {
                method: 'POST',
                body: dados,
                mode: 'no-cors',
            })
                .then(() => {
                    formulario.style.display = 'none';
                    if (msgSucesso) msgSucesso.style.display = 'block';
                })
                .catch((error) => {
                    console.error('Erro!', error.message);
                    if (btnEnviar) {
                        btnEnviar.innerText = 'Erro';
                        btnEnviar.disabled = false;
                    }
                });
        });
    });
});
// ========================================
// LAZY LOAD MANUAL DO DASHBOARD
// ========================================

/**
 * Fun√ß√£o para carregar o dashboard do Looker Studio
 * Chamada quando o usu√°rio clica no bot√£o
 */
// ========================================
// LAZY LOAD MANUAL DO DASHBOARD COM DETEC√á√ÉO MOBILE
// ========================================

/**
 * Detecta se o usu√°rio est√° em dispositivo m√≥vel
 */
function isMobileDevice() {
    // PRIORIDADE 1: Largura da tela (funciona em DevTools e Live Preview)
    const screenWidth = window.innerWidth;
    const isMobileScreen = screenWidth <= 768;
    
    // PRIORIDADE 2: User Agent (para dispositivos reais)
    const userAgent = navigator.userAgent.toLowerCase();
    const mobileKeywords = ['android', 'webos', 'iphone', 'ipad', 'ipod', 'blackberry', 'windows phone'];
    const isMobileUA = mobileKeywords.some(keyword => userAgent.includes(keyword));
    
    // PRIORIDADE 3: Touch support
    const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
    
    // DEBUG: Mostra informa√ß√µes no console
    console.log('=== DETEC√á√ÉO DE DISPOSITIVO ===');
    console.log('Largura da tela:', screenWidth + 'px');
    console.log('√â mobile pela tela?', isMobileScreen ? 'SIM' : 'N√ÉO');
    console.log('User Agent:', userAgent);
    console.log('√â mobile pelo UA?', isMobileUA ? 'SIM' : 'N√ÉO');
    console.log('Tem touch?', isTouchDevice ? 'SIM' : 'N√ÉO');
    console.log('===============================');
    
    // Retorna TRUE se a tela for pequena OU se for mobile real
    return isMobileScreen || isMobileUA;
}

/**
 * Retorna a URL correta do dashboard baseado no dispositivo
 */
function getDashboardURL() {
    if (isMobileDevice()) {
        // Dashboard Mobile
        return 'https://lookerstudio.google.com/embed/reporting/376200d4-1739-4e0b-b8e3-407e36631a05/page/0NhnF';
    } else {
        // Dashboard Desktop
        return 'https://lookerstudio.google.com/embed/reporting/fc49fdb9-f271-4463-8382-59490d2a7818/page/PrFhF';
    }
}

/**
 * Fun√ß√£o para carregar o dashboard do Looker Studio
 * Chamada quando o usu√°rio clica no bot√£o
 * Carrega automaticamente a vers√£o correta (mobile ou desktop)
 */
function loadDashboard() {
    const placeholder = document.getElementById('dashboard-placeholder');
    const button = placeholder.querySelector('.dashboard-load-btn');
    
    if (!placeholder) {
        console.error('Dashboard placeholder n√£o encontrado');
        return;
    }
    
    // Detecta o tipo de dispositivo
    const isMobile = isMobileDevice();
    const dashboardURL = getDashboardURL();
    
    // Log para debug (pode remover depois)
    console.log('Dispositivo:', isMobile ? 'Mobile' : 'Desktop');
    console.log('URL do Dashboard:', dashboardURL);
    
    // Guarda a posi√ß√£o atual do scroll
    const scrollPosition = window.scrollY;
    
    // Adiciona classe de loading
    placeholder.classList.add('dashboard-loading');
    
    // Atualiza o bot√£o com feedback do tipo de dashboard
    if (button) {
        button.disabled = true;
        button.innerHTML = isMobile 
            ? '<span>Carregando vers√£o mobile...</span>' 
            : '<span>Carregando vers√£o desktop...</span>';
    }
    
    // Pequeno delay para feedback visual
    setTimeout(() => {
        // Cria o iframe
        const iframe = document.createElement('iframe');
        iframe.className = 'looker-iframe';
        iframe.src = dashboardURL; // URL din√¢mica baseada no dispositivo
        iframe.frameBorder = '0';
        iframe.style.border = '0';
        iframe.allowFullscreen = true;
        iframe.setAttribute('sandbox', 'allow-storage-access-by-user-activation allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox');
        iframe.setAttribute('tabindex', '-1');
        iframe.setAttribute('loading', 'eager');
        
        // Adiciona atributo data para identifica√ß√£o
        iframe.setAttribute('data-dashboard-type', isMobile ? 'mobile' : 'desktop');
        
        // Previne auto-scroll quando o iframe carregar
        iframe.addEventListener('load', () => {
            // Restaura a posi√ß√£o do scroll se mudou
            const currentScroll = window.scrollY;
            if (Math.abs(currentScroll - scrollPosition) > 50) {
                window.scrollTo({
                    top: scrollPosition,
                    behavior: 'instant'
                });
            }
            
            // Remove classe de loading
            placeholder.classList.remove('dashboard-loading');
            
            // Log de sucesso
            console.log('Dashboard carregado com sucesso:', isMobile ? 'Mobile' : 'Desktop');
        });
        
        // Previne foco autom√°tico
        iframe.addEventListener('focus', (e) => {
            e.preventDefault();
            iframe.blur();
        });
        
        // Substitui o conte√∫do do placeholder pelo iframe
        placeholder.innerHTML = '';
        placeholder.appendChild(iframe);
        
    }, 300); // 300ms de delay para feedback visual
}

/**
 * Auto-load opcional quando a se√ß√£o fica vis√≠vel
 * Descomente o c√≥digo abaixo se quiser que carregue automaticamente
 */
/*
const dashboardAutoLoad = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const btn = entry.target.querySelector('.dashboard-load-btn');
            if (btn && !btn.disabled) {
                // Auto-clica ap√≥s 1 segundo de visibilidade
                setTimeout(() => {
                    btn.click();
                }, 1000);
                dashboardAutoLoad.unobserve(entry.target);
            }
        }
    });
}, {
    threshold: 0.3,
    rootMargin: '0px'
});

document.addEventListener('DOMContentLoaded', () => {
    const placeholder = document.getElementById('dashboard-placeholder');
    if (placeholder) {
        dashboardAutoLoad.observe(placeholder);
    }
});
*/

/**
 * Auto-load opcional quando a se√ß√£o fica vis√≠vel
 * Descomente o c√≥digo abaixo se quiser que carregue automaticamente
 */
/*
const dashboardAutoLoad = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const btn = entry.target.querySelector('.dashboard-load-btn');
            if (btn && !btn.disabled) {
                // Auto-clica ap√≥s 1 segundo de visibilidade
                setTimeout(() => {
                    btn.click();
                }, 1000);
                dashboardAutoLoad.unobserve(entry.target);
            }
        }
    });
}, {
    threshold: 0.3,
    rootMargin: '0px'
});

document.addEventListener('DOMContentLoaded', () => {
    const placeholder = document.getElementById('dashboard-placeholder');
    if (placeholder) {
        dashboardAutoLoad.observe(placeholder);
    }
});
*/
